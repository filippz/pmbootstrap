From ae0359b5d6fdfeafb1cc05b57c1c37c16df1bccb Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Filip=20Matijevi=C4=87?= <filip.matijevic.pz@gmail.com>
Date: Sun, 22 Nov 2015 19:44:12 +0100
Subject: [PATCH 11/53] ARM: dts: N9: Add lp5521 support
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Signed-off-by: Filip MatijeviÄ‡ <filip.matijevic.pz@gmail.com>
---
 arch/arm/boot/dts/omap3-n9.dts       | 16 ++++++++++++++++
 arch/arm/boot/dts/omap3-n950-n9.dtsi | 11 ++++++-----
 2 files changed, 22 insertions(+), 5 deletions(-)

diff --git a/arch/arm/boot/dts/omap3-n9.dts b/arch/arm/boot/dts/omap3-n9.dts
index cd4c6101b8b2..f77322204d71 100644
--- a/arch/arm/boot/dts/omap3-n9.dts
+++ b/arch/arm/boot/dts/omap3-n9.dts
@@ -62,6 +62,22 @@
		atmel,suspend-mode = <2>; /* MXT_SUSPEND_REGULATOR */
		atmel,cfg_name = "RM-696_Pyrenees_SMD_V1_6.raw";
	};
+
+	led@32 {
+		compatible = "national,lp5521";
+		reg = <0x32>;
+		pinctrl-names = "default";
+		pinctrl-0 = <&led_pins>;
+		label = "lp5521";
+		clock-mode = /bits/ 8 <2>; /* LP55XX_CLOCK_EXT */
+		enable-gpio = <&gpio2 9 GPIO_ACTIVE_HIGH>; /* gpio_41 */
+		r-to-batt;
+
+		chan0 {
+			led-cur = /bits/ 8 <0x32>; /* 50 = 5 mA */
+			max-cur = /bits/ 8 <0x82>; /* 130 = 13 mA */
+		};
+	};
 };

 &mmc3 {
diff --git a/arch/arm/boot/dts/omap3-n950-n9.dtsi b/arch/arm/boot/dts/omap3-n950-n9.dtsi
index cb486ba092fd..87c360d0ee59 100644
--- a/arch/arm/boot/dts/omap3-n950-n9.dtsi
+++ b/arch/arm/boot/dts/omap3-n950-n9.dtsi
@@ -54,12 +54,12 @@
	leds {
		compatible = "gpio-leds";

-		heartbeat {
-			label = "debug::sleep";
+		led_1 {
			gpios = <&gpio3 28 GPIO_ACTIVE_HIGH>;  /* gpio92 */
-			linux,default-trigger = "default-on";
+			default-state = "off";
			pinctrl-names = "default";
-			pinctrl-0 = <&debug_leds>;
+			pinctrl-0 = <&led_pins>;
+		};
	};

	ocp {
@@ -77,9 +77,10 @@
		>;
	};

-	debug_leds: pinmux_debug_led_pins {
+	led_pins: pinmux_led_pins {
		pinctrl-single,pins = <
			OMAP3_CORE1_IOPAD(0x2108, PIN_OUTPUT | MUX_MODE4)       /* dss_data22.gpio_92 */
+			OMAP3_CORE1_IOPAD(0x2088, PIN_OUTPUT | MUX_MODE4)       /* gpmc_a8.gpio_41 -> RGB_EN */
		>;
	};

--
2.11.0
