From a00c51226d9374d72612fe4c1d4e3e5ef4e1e27b Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Filip=20Matijevi=C4=87?= <filip.matijevic.pz@gmail.com>
Date: Fri, 1 Jul 2016 18:51:11 +0200
Subject: [PATCH 08/53] ARM: dts: N9/N950: Add touchscreen support
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Signed-off-by: Filip MatijeviÄ‡ <filip.matijevic.pz@gmail.com>
---
 arch/arm/boot/dts/omap3-n9.dts       | 12 ++++++++++++
 arch/arm/boot/dts/omap3-n950-n9.dtsi |  7 +++++++
 arch/arm/boot/dts/omap3-n950.dts     | 12 ++++++++++++
 3 files changed, 31 insertions(+)

diff --git a/arch/arm/boot/dts/omap3-n9.dts b/arch/arm/boot/dts/omap3-n9.dts
index 517c13c8e314..2f92fec9c7c0 100644
--- a/arch/arm/boot/dts/omap3-n9.dts
+++ b/arch/arm/boot/dts/omap3-n9.dts
@@ -36,6 +36,18 @@
			};
		};
	};
+
+	touch@4b {
+		compatible = "atmel,maxtouch";
+		reg = <0x4b>;
+		interrupt-parent = <&gpio2>;
+		interrupts = <29 2>; /* gpio_61, IRQF_TRIGGER_FALLING*/
+		atmel,reset-gpio = <&gpio3 17 0>; /* gpio_81 */
+		vdd-supply = <&vio>;
+		avdd-supply = <&vaux1>;
+		atmel,suspend-mode = <2>; /* MXT_SUSPEND_REGULATOR */
+		atmel,cfg_name = "RM-696_Pyrenees_SMD_V1_6.raw";
+	};
 };

 &isp {
diff --git a/arch/arm/boot/dts/omap3-n950-n9.dtsi b/arch/arm/boot/dts/omap3-n950-n9.dtsi
index 7dfe4438f506..aaaccf9ff773 100644
--- a/arch/arm/boot/dts/omap3-n950-n9.dtsi
+++ b/arch/arm/boot/dts/omap3-n950-n9.dtsi
@@ -152,6 +152,13 @@
			OMAP3_CORE1_IOPAD(0x20e6, MUX_MODE1) /* dss_data5.dsi_dy2 */
		>;
	};
+
+	ts_pins: pinmux_ts_pins {
+		pinctrl-single,pins = <
+			OMAP3_CORE1_IOPAD(0x20c8, PIN_INPUT  | MUX_MODE4)	/* gpmc_nbe1.gpio_61 -> TINTX */
+			OMAP3_CORE1_IOPAD(0x20f2, PIN_OUTPUT | MUX_MODE4)	/* dss_data11.gpio_81 -> TRESX */
+		>;
+	};
 };

 &omap3_pmx_core2 {
diff --git a/arch/arm/boot/dts/omap3-n950.dts b/arch/arm/boot/dts/omap3-n950.dts
index 0dc6aa778040..af81eedbc102 100644
--- a/arch/arm/boot/dts/omap3-n950.dts
+++ b/arch/arm/boot/dts/omap3-n950.dts
@@ -69,6 +69,18 @@
			};
		};
	};
+
+	touch@4b {
+		compatible = "atmel,maxtouch";
+		reg = <0x4b>;
+		interrupt-parent = <&gpio2>;
+		interrupts = <29 2>; /* gpio_61, IRQF_TRIGGER_FALLING*/
+		atmel,reset-gpio = <&gpio3 17 0>; /* gpio_81 */
+		vdd-supply = <&vio>;
+		avdd-supply = <&vaux1>;
+		atmel,suspend-mode = <2>; /* MXT_SUSPEND_REGULATOR */
+		atmel,cfg_name = "RM-680_Himalaya_AUO_V1_1.raw";
+	};
 };

 &isp {
--
2.11.0
